<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Database View - Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hexo"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hexo"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="IntroductionA View in SQL Server can be considered as a virtual table defined on top of it. True to its name, a view offers another entrance to look at data. A conventional view does not store actual"><meta property="og:type" content="blog"><meta property="og:title" content="AmazingGrace"><meta property="og:url" content="https://peters-17.github.io/"><meta property="og:site_name" content="AmazingGrace"><meta property="og:description" content="IntroductionA View in SQL Server can be considered as a virtual table defined on top of it. True to its name, a view offers another entrance to look at data. A conventional view does not store actual"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/avatar.png"><meta property="article:published_time" content="2023-12-17T19:35:43.000Z"><meta property="article:modified_time" content="2024-03-11T19:19:22.263Z"><meta property="article:author" content="Haoyang Yuan"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/avatar.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://peters-17.github.io/2023/12/17/DatabseView/"},"headline":"Hexo","image":["https://peters-17.github.io/img/og_image.png"],"datePublished":"2023-12-17T19:35:43.000Z","dateModified":"2024-03-11T19:19:22.263Z","author":{"@type":"Person","name":"Haoyang Yuan"},"description":"IntroductionA View in SQL Server can be considered as a virtual table defined on top of it. True to its name, a view offers another entrance to look at data. A conventional view does not store actual"}</script><link rel="canonical" href="https://peters-17.github.io/2023/12/17/DatabseView/"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.1"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Hexo</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/album">Album</a><a class="navbar-item" href="/friend">Friend</a><a class="navbar-item" href="/message">Message</a><a class="navbar-item" href="/self-talking">Self-talking</a><a class="navbar-item" href="/music">Music</a><a class="navbar-item" href="/media">Media</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Join Gitter" href="https://github.com/Peters-17"><i class="fab fa-gitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Peters-17"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2023-12-17  <a class="commentCountImg" href="/2023/12/17/DatabseView/#comment-container"><span class="display-none-class">1f92442e725e047e644292e91e534781</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="1f92442e725e047e644292e91e534781">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>10 m  <i class="fas fa-pencil-alt"> </i>1.5 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">Database View</h1><div class="content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>A View in SQL Server can be considered as a virtual table defined on top of it. True to its name, a view offers another entrance to look at data. A conventional view does not store actual data but merely contains a SELECT statement and metadata about the tables involved. Through views, clients no longer need to understand the underlying table structures and their relationships, as views provide a unified interface to access data.</p>
<h2 id="Why-Use-Views"><a href="#Why-Use-Views" class="headerlink" title="Why Use Views?"></a>Why Use Views?</h2><ul>
<li>Views abstract the underlying table structures, simplifying data access operations.</li>
<li>By hiding the underlying table structures, security is significantly enhanced, allowing users to see only the data provided by the views.</li>
<li>Views facilitate permission management by granting users access to views instead of the underlying tables, further strengthening security.</li>
<li>Views provide an interface for users to access data. When the underlying tables change, altering the view’s statement to adapt ensures that client programs built on this view remain unaffected.</li>
</ul>
<h2 id="Classification-of-Views-in-SQL"><a href="#Classification-of-Views-in-SQL" class="headerlink" title="Classification of Views in SQL"></a>Classification of Views in SQL</h2><p>Views in SQL can be categorized into three types:</p>
<ol>
<li><strong>Regular View</strong></li>
<li><strong>Indexed View</strong></li>
<li><strong>Partitioned View</strong></li>
</ol>
<p>Let’s discuss these view types in detail.</p>
<h2 id="1-Regular-View"><a href="#1-Regular-View" class="headerlink" title="1) Regular View"></a>1) Regular View</h2><p>A Regular View is defined by a SELECT statement and includes only its definition and the metadata of the referenced tables, without actually storing data. The template for creating a view as per MSDN is as follows:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> [schema_name.]view_name [(<span class="keyword">column</span> [, ...n])]</span><br><span class="line">[<span class="keyword">WITH</span> <span class="operator">&lt;</span>view_attribute<span class="operator">&gt;</span> [, ...n]]</span><br><span class="line"><span class="keyword">AS</span> select_statement</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION] [;]</span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span>view_attribute<span class="operator">&gt;</span> ::<span class="operator">=</span></span><br><span class="line">&#123;</span><br><span class="line">    [ENCRYPTION]</span><br><span class="line">    [SCHEMABINDING]</span><br><span class="line">    [VIEW_METADATA]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>

<h3 id="Parameters-are-quite-straightforward-and-here-is-an-explanation-for-the-above"><a href="#Parameters-are-quite-straightforward-and-here-is-an-explanation-for-the-above" class="headerlink" title="Parameters are quite straightforward, and here is an explanation for the above:"></a>Parameters are quite straightforward, and here is an explanation for the above:</h3><ol>
<li><strong>ENCRYPTION: The view is encrypted. Selecting this option prevents modifications. Save the script when creating the view; otherwise, it cannot be modified later.</strong></li>
<li><strong>SCHEMABINDING: Binds the view definition to the schema of the referenced tables. If this option is selected, the schema of the referenced tables (such as column data types) cannot be changed casually. To alter the underlying table’s schema, first drop or alter the views bound to it.</strong></li>
<li><strong>VIEW_METADATA: An interesting option. If not selected, the metadata returned to the client is that of the tables referenced by the View. If selected, the View’s metadata is returned, making the view appear more like a table to clients.</strong></li>
<li><strong>WITH CHECK OPTION: This option is used for restricting data updates through the view, which will be explained further in the section on updating data through views.</strong></li>
</ol>
<h3 id="There-are-some-rules-to-follow-when-creating-views-aside-from-complying-with-the-above-syntax"><a href="#There-are-some-rules-to-follow-when-creating-views-aside-from-complying-with-the-above-syntax" class="headerlink" title="There are some rules to follow when creating views, aside from complying with the above syntax:"></a>There are some rules to follow when creating views, aside from complying with the above syntax:</h3><ol>
<li><strong>In a View, unless the TOP keyword is present, the ORDER BY clause cannot be used (a hack to use ORDER BY is applying TOP 100 percent…).</strong></li>
<li><strong>Views must be uniquely named within each Schema.</strong></li>
<li><strong>Views nesting cannot exceed 32 levels (in practical work, nesting beyond two levels is discouraged).</strong></li>
<li><strong>Keywords like COMPUTE, COMPUTE BY, INTO are not allowed in Views.</strong></li>
</ol>
<h2 id="2-Indexed-View"><a href="#2-Indexed-View" class="headerlink" title="2) Indexed View"></a>2) Indexed View</h2><h3 id="An-Indexed-View-is-a-regular-view-with-a-unique-clustered-index-added-to-it-effectively-turning-the-view-into-an-object-equivalent-to-a-table"><a href="#An-Indexed-View-is-a-regular-view-with-a-unique-clustered-index-added-to-it-effectively-turning-the-view-into-an-object-equivalent-to-a-table" class="headerlink" title="An Indexed View is a regular view with a unique clustered index added to it, effectively turning the view into an object equivalent to a table!"></a>An Indexed View is a regular view with a unique clustered index added to it, effectively turning the view into an object equivalent to a table!</h3><h4 id="Indexed-views-in-SQL-Server-are-conceptually-similar-to-Oracle’s-Materialized-Views-To-understand-indexed-views-one-must-first-grasp-the-concept-of-clustered-indexes-Simplified-a-clustered-index-can-be-thought-of-as-a-primary-key-with-the-database’s-data-physically-stored-in-the-table-according-to-the-primary-key’s-order-like-a-dictionary-organized-from-A-to-Z-This-organization-avoids-full-table-scans-thus-improving-performance-Therefore-a-table-can-have-only-one-clustered-index"><a href="#Indexed-views-in-SQL-Server-are-conceptually-similar-to-Oracle’s-Materialized-Views-To-understand-indexed-views-one-must-first-grasp-the-concept-of-clustered-indexes-Simplified-a-clustered-index-can-be-thought-of-as-a-primary-key-with-the-database’s-data-physically-stored-in-the-table-according-to-the-primary-key’s-order-like-a-dictionary-organized-from-A-to-Z-This-organization-avoids-full-table-scans-thus-improving-performance-Therefore-a-table-can-have-only-one-clustered-index" class="headerlink" title="Indexed views in SQL Server are conceptually similar to Oracle’s Materialized Views. To understand indexed views, one must first grasp the concept of clustered indexes. Simplified, a clustered index can be thought of as a primary key, with the database’s data physically stored in the table according to the primary key’s order, like a dictionary organized from A to Z. This organization avoids full table scans, thus improving performance. Therefore, a table can have only one clustered index."></a>Indexed views in SQL Server are conceptually similar to Oracle’s Materialized Views. To understand indexed views, one must first grasp the concept of clustered indexes. Simplified, a clustered index can be thought of as a primary key, with the database’s data physically stored in the table according to the primary key’s order, like a dictionary organized from A to Z. This organization avoids full table scans, thus improving performance. Therefore, a table can have only one clustered index.</h4><h4 id="For-indexed-views-adding-a-clustered-index-means-the-view-no-longer-just-contains-a-SELECT-statement-and-table-metadata-the-indexed-view-physically-stores-data-in-the-database-and-keeps-it-synchronized-with-the-underlying-tables"><a href="#For-indexed-views-adding-a-clustered-index-means-the-view-no-longer-just-contains-a-SELECT-statement-and-table-metadata-the-indexed-view-physically-stores-data-in-the-database-and-keeps-it-synchronized-with-the-underlying-tables" class="headerlink" title="For indexed views, adding a clustered index means the view no longer just contains a SELECT statement and table metadata; the indexed view physically stores data in the database and keeps it synchronized with the underlying tables."></a>For indexed views, adding a clustered index means the view no longer just contains a SELECT statement and table metadata; the indexed view physically stores data in the database and keeps it synchronized with the underlying tables.</h4><h4 id="Understanding-the-principle-behind-indexed-views-reveals-their-significant-performance-boost-for-LDAP-involving-massive-data-analysis-and-queries-especially-when-indexed-views-contain-aggregate-functions-and-involve-costly-JOINs-Since-the-results-of-aggregate-functions-are-physically-stored-in-the-indexed-view-it’s-not-necessary-to-perform-aggregation-every-time-the-view-is-used-markedly-improving-performance"><a href="#Understanding-the-principle-behind-indexed-views-reveals-their-significant-performance-boost-for-LDAP-involving-massive-data-analysis-and-queries-especially-when-indexed-views-contain-aggregate-functions-and-involve-costly-JOINs-Since-the-results-of-aggregate-functions-are-physically-stored-in-the-indexed-view-it’s-not-necessary-to-perform-aggregation-every-time-the-view-is-used-markedly-improving-performance" class="headerlink" title="Understanding the principle behind indexed views reveals their significant performance boost for LDAP, involving massive data analysis and queries, especially when indexed views contain aggregate functions and involve costly JOINs. Since the results of aggregate functions are physically stored in the indexed view, it’s not necessary to perform aggregation every time the view is used, markedly improving performance."></a>Understanding the principle behind indexed views reveals their significant performance boost for LDAP, involving massive data analysis and queries, especially when indexed views contain aggregate functions and involve costly JOINs. Since the results of aggregate functions are physically stored in the indexed view, it’s not necessary to perform aggregation every time the view is used, markedly improving performance.</h4><h4 id="However-every-time-an-underlying-table-involved-in-an-indexed-view-is-updated-inserted-or-deleted-SQL-Server-needs-to-identify-the-changed-rows-to-synchronize-the-indexed-view-Thus-for-OLTP-systems-with-frequent-modifications-the-performance-might-degrade-due-to-the-extensive-synchronization-required"><a href="#However-every-time-an-underlying-table-involved-in-an-indexed-view-is-updated-inserted-or-deleted-SQL-Server-needs-to-identify-the-changed-rows-to-synchronize-the-indexed-view-Thus-for-OLTP-systems-with-frequent-modifications-the-performance-might-degrade-due-to-the-extensive-synchronization-required" class="headerlink" title="However, every time an underlying table involved in an indexed view is updated, inserted, or deleted, SQL Server needs to identify the changed rows to synchronize the indexed view. Thus, for OLTP systems with frequent modifications, the performance might degrade due to the extensive synchronization required."></a>However, every time an underlying table involved in an indexed view is updated, inserted, or deleted, SQL Server needs to identify the changed rows to synchronize the indexed view. Thus, for OLTP systems with frequent modifications, the performance might degrade due to the extensive synchronization required.</h4><h2 id="3-Partitioned-View"><a href="#3-Partitioned-View" class="headerlink" title="3) Partitioned View"></a>3) Partitioned View</h2><h4 id="Partitioned-views-from-a-micro-implementation-perspective-return-data-sets-obtained-by-UNION-joining-several-parallel-tables-i-e-tables-with-the-same-structure-columns-and-data-types-but-storing-different-row-sets"><a href="#Partitioned-views-from-a-micro-implementation-perspective-return-data-sets-obtained-by-UNION-joining-several-parallel-tables-i-e-tables-with-the-same-structure-columns-and-data-types-but-storing-different-row-sets" class="headerlink" title="Partitioned views, from a micro-implementation perspective, return data sets obtained by UNION-joining several parallel tables (i.e., tables with the same structure - columns and data types, but storing different row sets)."></a>Partitioned views, from a micro-implementation perspective, return data sets obtained by UNION-joining several parallel tables (i.e., tables with the same structure - columns and data types, but storing different row sets).</h4><h4 id="There-are-generally-two-types-of-partitioned-views"><a href="#There-are-generally-two-types-of-partitioned-views" class="headerlink" title="There are generally two types of partitioned views:"></a>There are generally two types of partitioned views:</h4><ol>
<li><strong>Local Partitioned View</strong></li>
<li><strong>Distributed Partitioned View</strong></li>
<li><strong>Since local partitioned views are mainly for backward compatibility with versions before SQL Server 2005, this article will focus on distributed partitioned views.</strong></li>
</ol>
<h4 id="Distributed-partitioned-views-essentially-connect-parallel-data-sets-obtained-from-different-or-the-same-data-sources-The-biggest-advantage-of-using-distributed-partitioned-views-is-performance-enhancement-For-example-in-the-scenario-above-if-I-only-want-to-retrieve-information-for-EmployeeID-8-using-a-distributed-view-SQL-Server-can-intelligently-scan-only-Table-2-that-contains-EmployeeID-8-avoiding-a-full-table-scan-This-significantly-reduces-IO-operations-thereby-enhancing-performance"><a href="#Distributed-partitioned-views-essentially-connect-parallel-data-sets-obtained-from-different-or-the-same-data-sources-The-biggest-advantage-of-using-distributed-partitioned-views-is-performance-enhancement-For-example-in-the-scenario-above-if-I-only-want-to-retrieve-information-for-EmployeeID-8-using-a-distributed-view-SQL-Server-can-intelligently-scan-only-Table-2-that-contains-EmployeeID-8-avoiding-a-full-table-scan-This-significantly-reduces-IO-operations-thereby-enhancing-performance" class="headerlink" title="Distributed partitioned views essentially connect parallel data sets obtained from different or the same data sources. The biggest advantage of using distributed partitioned views is performance enhancement. For example, in the scenario above, if I only want to retrieve information for EmployeeID=8 using a distributed view, SQL Server can intelligently scan only Table 2 that contains EmployeeID=8, avoiding a full table scan. This significantly reduces IO operations, thereby enhancing performance."></a>Distributed partitioned views essentially connect parallel data sets obtained from different or the same data sources. The biggest advantage of using distributed partitioned views is performance enhancement. For example, in the scenario above, if I only want to retrieve information for EmployeeID=8 using a distributed view, SQL Server can intelligently scan only Table 2 that contains EmployeeID=8, avoiding a full table scan. This significantly reduces IO operations, thereby enhancing performance.</h4><h4 id="It’s-important-to-note-that-the-primary-keys-involved-in-the-tables-of-a-distributed-partitioned-view-cannot-overlap-For-example-if-Table-A’s-ContactID-ranges-from-1-4-then-Table-B’s-ContactID-cannot-range-from-2-8"><a href="#It’s-important-to-note-that-the-primary-keys-involved-in-the-tables-of-a-distributed-partitioned-view-cannot-overlap-For-example-if-Table-A’s-ContactID-ranges-from-1-4-then-Table-B’s-ContactID-cannot-range-from-2-8" class="headerlink" title="It’s important to note that the primary keys involved in the tables of a distributed partitioned view cannot overlap. For example, if Table A’s ContactID ranges from 1-4, then Table B’s ContactID cannot range from 2-8."></a>It’s important to note that the primary keys involved in the tables of a distributed partitioned view cannot overlap. For example, if Table A’s ContactID ranges from 1-4, then Table B’s ContactID cannot range from 2-8.</h4><h4 id="Another-point-to-note-is-that-Check-constraints-should-be-added-to-the-primary-keys-of-the-distributed-partitioned-view-enabling-the-SQL-Server’s-query-analyzer-to-know-which-table-to-scan-Here’s-an-example"><a href="#Another-point-to-note-is-that-Check-constraints-should-be-added-to-the-primary-keys-of-the-distributed-partitioned-view-enabling-the-SQL-Server’s-query-analyzer-to-know-which-table-to-scan-Here’s-an-example" class="headerlink" title="Another point to note is that Check constraints should be added to the primary keys of the distributed partitioned view, enabling the SQL Server’s query analyzer to know which table to scan. Here’s an example:"></a>Another point to note is that Check constraints should be added to the primary keys of the distributed partitioned view, enabling the SQL Server’s query analyzer to know which table to scan. Here’s an example:</h4><h4 id="In-the-Microsoft-sample-database-AdventureWorks-I-store-data-from-the-first-100-rows-and-rows-100-200-into-two-tables-Employee100-and-Employee200-respectively"><a href="#In-the-Microsoft-sample-database-AdventureWorks-I-store-data-from-the-first-100-rows-and-rows-100-200-into-two-tables-Employee100-and-Employee200-respectively" class="headerlink" title="In the Microsoft sample database AdventureWorks, I store data from the first 100 rows and rows 100-200 into two tables, Employee100 and Employee200, respectively:"></a>In the Microsoft sample database AdventureWorks, I store data from the first 100 rows and rows 100-200 into two tables, Employee100 and Employee200, respectively:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Create Employee100</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">100</span> <span class="operator">*</span> <span class="keyword">INTO</span> Employee100</span><br><span class="line"><span class="keyword">FROM</span> HumanResources.Employee </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> EmployeeID</span><br><span class="line"><span class="comment">-- Create Employee200</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">INTO</span> Employee200</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">(<span class="keyword">SELECT</span> TOP <span class="number">100</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> HumanResources.Employee </span><br><span class="line"><span class="keyword">WHERE</span> EmployeeID <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> TOP <span class="number">100</span> EmployeeID <span class="keyword">FROM</span> HumanResources.Employee <span class="keyword">ORDER</span> <span class="keyword">BY</span> EmployeeID)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> HumanResources.Employee.EmployeeID) <span class="keyword">AS</span> e</span><br></pre></td></tr></table></figure>

<h4 id="Now-let’s-create-a-distributed-partitioned-view"><a href="#Now-let’s-create-a-distributed-partitioned-view" class="headerlink" title="Now, let’s create a distributed partitioned view:"></a>Now, let’s create a distributed partitioned view:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_part_view_test</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Employee100</span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Employee200</span><br></pre></td></tr></table></figure>

<h4 id="When-querying-this-view"><a href="#When-querying-this-view" class="headerlink" title="When querying this view:"></a>When querying this view:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> v_part_view_test</span><br><span class="line"><span class="keyword">WHERE</span> EmployeeID<span class="operator">=</span><span class="number">105</span></span><br></pre></td></tr></table></figure>

<h4 id="So-when-different-data-tables-are-placed-on-different-servers-or-use-a-RAID5-disk-array-distributed-partitioned-views-can-further-enhance-query-performance"><a href="#So-when-different-data-tables-are-placed-on-different-servers-or-use-a-RAID5-disk-array-distributed-partitioned-views-can-further-enhance-query-performance" class="headerlink" title="So, when different data tables are placed on different servers or use a RAID5 disk array, distributed partitioned views can further enhance query performance."></a>So, when different data tables are placed on different servers or use a RAID5 disk array, distributed partitioned views can further enhance query performance.</h4><h4 id="Can-using-distributed-partitioned-views-always-improve-performance-Absolutely-not-If-the-query-involves-aggregate-functions-especially-with-DISTINCT-in-the-aggregate-functions-or-sorts-without-a-WHERE-condition-it’s-definitely-a-performance-killer-Aggregate-functions-require-scanning-all-tables-in-the-distributed-partitioned-view-then-performing-UNION-operations-before-calculating-which-can-significantly-impact-performance"><a href="#Can-using-distributed-partitioned-views-always-improve-performance-Absolutely-not-If-the-query-involves-aggregate-functions-especially-with-DISTINCT-in-the-aggregate-functions-or-sorts-without-a-WHERE-condition-it’s-definitely-a-performance-killer-Aggregate-functions-require-scanning-all-tables-in-the-distributed-partitioned-view-then-performing-UNION-operations-before-calculating-which-can-significantly-impact-performance" class="headerlink" title="Can using distributed partitioned views always improve performance? Absolutely not. If the query involves aggregate functions, especially with DISTINCT in the aggregate functions, or sorts without a WHERE condition, it’s definitely a performance killer. Aggregate functions require scanning all tables in the distributed partitioned view, then performing UNION operations before calculating, which can significantly impact performance."></a>Can using distributed partitioned views always improve performance? Absolutely not. If the query involves aggregate functions, especially with DISTINCT in the aggregate functions, or sorts without a WHERE condition, it’s definitely a performance killer. Aggregate functions require scanning all tables in the distributed partitioned view, then performing UNION operations before calculating, which can significantly impact performance.</h4><h2 id="Updating-Data-Through-Views"><a href="#Updating-Data-Through-Views" class="headerlink" title="Updating Data Through Views"></a>Updating Data Through Views</h2><h4 id="I-do-not-recommend-updating-data-through-views-since-views-cannot-accept-parameters-I-prefer-using-stored-procedures-for-implementation"><a href="#I-do-not-recommend-updating-data-through-views-since-views-cannot-accept-parameters-I-prefer-using-stored-procedures-for-implementation" class="headerlink" title="I do not recommend updating data through views since views cannot accept parameters. I prefer using stored procedures for implementation."></a>I do not recommend updating data through views since views cannot accept parameters. I prefer using stored procedures for implementation.</h4><h4 id="Updating-data-through-views-is-done-in-the-same-manner-as-updating-data-in-tables-as-mentioned-before-a-view-can-be-considered-as-a-virtual-table-and-if-it’s-an-indexed-view-it’s-practically-a-table"><a href="#Updating-data-through-views-is-done-in-the-same-manner-as-updating-data-in-tables-as-mentioned-before-a-view-can-be-considered-as-a-virtual-table-and-if-it’s-an-indexed-view-it’s-practically-a-table" class="headerlink" title="Updating data through views is done in the same manner as updating data in tables (as mentioned before, a view can be considered as a virtual table, and if it’s an indexed view, it’s practically a table)."></a>Updating data through views is done in the same manner as updating data in tables (as mentioned before, a view can be considered as a virtual table, and if it’s an indexed view, it’s practically a table).</h4><h4 id="When-updating-data-through-views-keep-in-mind"><a href="#When-updating-data-through-views-keep-in-mind" class="headerlink" title="When updating data through views, keep in mind:"></a>When updating data through views, keep in mind:</h4><ol>
<li><strong>At least one user table must follow the FROM clause in the view.</strong></li>
<li><strong>Regardless of how many tables the view’s query involves, only one table’s data can be updated at a time.</strong></li>
<li><strong>Columns calculated through expressions, constant columns, and columns resulting from aggregate functions cannot be updated.</strong></li>
<li><strong>Columns not affected by Group By, Having, and Distinct keywords cannot be updated.</strong></li>
</ol>
<h2 id="Tips-in-Views"><a href="#Tips-in-Views" class="headerlink" title="Tips in Views"></a>Tips in Views</h2><h3 id="To-find-a-view’s-definition-through-its-name"><a href="#To-find-a-view’s-definition-through-its-name" class="headerlink" title="To find a view’s definition through its name:"></a>To find a view’s definition through its name:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sys.sql_modules</span><br><span class="line"><span class="keyword">WHERE</span> object_id<span class="operator">=</span>OBJECT_ID(<span class="string">&#x27;view_name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="As-mentioned-regular-views-only-store-the-SELECT-statement-and-referenced-tables’-metadata-When-the-underlying-table-data-changes-sometimes-the-view’s-table-metadata-is-not-synchronized-in-time-Use-the-following-code-for-manual-synchronization"><a href="#As-mentioned-regular-views-only-store-the-SELECT-statement-and-referenced-tables’-metadata-When-the-underlying-table-data-changes-sometimes-the-view’s-table-metadata-is-not-synchronized-in-time-Use-the-following-code-for-manual-synchronization" class="headerlink" title="As mentioned, regular views only store the SELECT statement and referenced tables’ metadata. When the underlying table data changes, sometimes the view’s table metadata is not synchronized in time. Use the following code for manual synchronization:"></a>As mentioned, regular views only store the SELECT statement and referenced tables’ metadata. When the underlying table data changes, sometimes the view’s table metadata is not synchronized in time. Use the following code for manual synchronization:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXEC</span> sp_refreshview <span class="string">&#x27;view_name&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="Best-Practices-in-Views"><a href="#Best-Practices-in-Views" class="headerlink" title="Best Practices in Views"></a>Best Practices in Views</h2><h4 id="These-are-some-of-my-personal-experiences-and-I-welcome-additions"><a href="#These-are-some-of-my-personal-experiences-and-I-welcome-additions" class="headerlink" title="These are some of my personal experiences, and I welcome additions:"></a>These are some of my personal experiences, and I welcome additions:</h4><ol>
<li><strong>Ensure the SELECT statement in the View is optimized for performance (seems obvious, but truths are often simple).</strong></li>
<li><strong>Avoid nesting views, if necessary, at most nest one level.</strong></li>
<li><strong>Use stored procedures and user-defined functions instead of Views when possible, as stored procedures cache execution plans, offer better performance, and have fewer restrictions.</strong></li>
<li><strong>Do not use aggregate functions in partitioned views, especially when they include DISTINCT.</strong></li>
<li><strong>If possible, include WHERE clauses inside the view rather than outside (because calling a view returns all rows, then filters, which is a performance killer, especially if you also add an ORDER BY…).</strong></li>
</ol>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><h4 id="This-article-detailed-the-three-types-of-views-each-with-its-own-use-cases-Properly-used-they-can-enhance-performance-but-improper-use-can-drag-down-performance"><a href="#This-article-detailed-the-three-types-of-views-each-with-its-own-use-cases-Properly-used-they-can-enhance-performance-but-improper-use-can-drag-down-performance" class="headerlink" title="This article detailed the three types of views, each with its own use cases. Properly used, they can enhance performance, but improper use can drag down performance."></a>This article detailed the three types of views, each with its own use cases. Properly used, they can enhance performance, but improper use can drag down performance.</h4><h4 id="Remember-the-adage-“Practice-makes-perfect”…-With-practice-and-thought-there-will-surely-be-gains"><a href="#Remember-the-adage-“Practice-makes-perfect”…-With-practice-and-thought-there-will-surely-be-gains" class="headerlink" title="Remember the adage: “Practice makes perfect”… With practice and thought, there will surely be gains."></a>Remember the adage: “Practice makes perfect”… With practice and thought, there will surely be gains.</h4></div><div class="article-licensing box"><div class="licensing-title"><p>Database View</p><p><a href="https://peters-17.github.io/2023/12/17/DatabseView/">https://peters-17.github.io/2023/12/17/DatabseView/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><a href="https://peters-17.github.io"><p>Haoyang Yuan</p></a></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2023-12-17</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-03-11</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135456.png" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135550.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2024/01/20/restfulAPI/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">RESTful API</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/12/05/DatabaseIndex/"><span class="level-item">Database Indexing</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">Comments</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '1f92442e725e047e644292e91e534781',
            repo: 'Peters-17.github.io',
            owner: 'Peters-17',
            clientID: '46a9f3481b46ea0129d8',
            clientSecret: '79c7c9cb847e141757d7864453bcbf89f0655b24',
            admin: ["removeif"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/avatar.png" alt="AmazingGrace"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">AmazingGrace</p><p class="is-size-6 is-block">那必须是我了</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Moon</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">10</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">6</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Peters-17" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Peters-17"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/Peters-17"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:wjyyhy2021@gmail.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Next" href="https://Peters-17.github.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"From《"+data.from+"》</p><p>Provider-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-21T15:22:51.000Z">2024-02-21</time></p><p class="title"><a href="/2024/02/21/databaseB+tree/">Why Does MySQL Use B+ Trees Instead of Skip Lists for Indexing?</a></p><p class="categories"><a href="/categories/Technical-skills/">Technical skills</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-21T01:43:16.000Z">2024-01-20</time></p><p class="title"><a href="/2024/01/20/restfulAPI/">RESTful API</a></p><p class="categories"><a href="/categories/Technical-skills/">Technical skills</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-17T19:35:43.000Z">2023-12-17</time></p><p class="title"><a href="/2023/12/17/DatabseView/">Database View</a></p><p class="categories"><a href="/categories/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-06T00:52:57.000Z">2023-12-05</time></p><p class="title"><a href="/2023/12/05/DatabaseIndex/">Database Indexing</a></p><p class="categories"><a href="/categories/Technical-skills/">Technical skills</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-11T02:54:14.000Z">2023-08-10</time></p><p class="title"><a href="/2023/08/10/Greedy%20Algorithm/">Theoretical Basics of Greedy Algorithms</a></p><p class="categories"><a href="/categories/Technical-skills/">Technical skills</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Computer/"><span class="level-start"><span class="level-item">Computer</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Life/"><span class="level-start"><span class="level-item">Life</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/System-Design/"><span class="level-start"><span class="level-item">System Design</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Technical-skills/"><span class="level-start"><span class="level-item">Technical skills</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Database/"><span class="tag">Database</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithms/"><span class="tag">Algorithms</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer/"><span class="tag">Computer</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Life/"><span class="tag">Life</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful-API/"><span class="tag">RESTful API</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/System-Design/"><span class="tag">System Design</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Hexo</a><p class="size-small"><span>&copy; 2024 Haoyang Yuan</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️Site from <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> has existed <strong>" + dnum + "</strong> d <strong>" + hnum + "</strong> h <strong>" + mnum + "</strong> m <strong>" + snum + "</strong> s！❤️";
        }var now = new Date();setInterval("createTime('2022/01/24 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️Thx <strong><span id="busuanzi_value_site_uv">99+</span></strong> users <strong><span id="busuanzi_value_site_pv">99+</span></strong> visited！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Peters-17"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','Peters-17','Peters-17.github.io',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(false){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','Peters-17','Peters-17.github.io',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>